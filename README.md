# TaxiService
Simple service for taxi ordering

## Roles
### Operator

Оператор, то есть человек или робот, принимающий заказы на осуществление поездок на машинах данной компании. Оператор должен принять заявку, поступившую от пользователя, после чего обработать её. Обработка заключается в поиске водителя, находящегося либо в минимальной близости, либо в соответствии с рейтингом водителя, получаемым как средство обратной связи пользователя, и принятии решения о возможности или невозможности осуществления заказа машины требуемой категории в установленные сроки. О принятом решении необходимо уведомить как пользователя (пассажира), так и водителя.

### User

Пользователь (пассажир), то есть человек, осуществляющий заказ машины такси. После подачи заявки и подтверждения оператором возможности её выполнения, пассажир едет с водителем от начального до конечного пункта. После этого пользователь (пассажир) имеет право выставить рейтинг водителю. От рейтинга водителя в данном случае будет зависеть вероятность осуществления им отложенного заказа или другие характеристики принятия заявки или осуществления заказа.

### Driver

Водитель, т.е. человек, осуществляющий заказ. Должен принять предложение оператора о перевозке пассажира. В случае принятия заказа, водитель едет на начальный адрес, там отмечает о своём прибытии, после посадки пассажира - о посадке, по прибытии на конечный пункт - об успешном осуществлении заказа.

## Business processes
### Ordering

1. Пользователь оставляет заявку на вызов такси

2. Оператор принимает заявку на рассмотрение

3. Если срочный заказ

    3.1. Оператор выбирает несколько ближайших машин, отправляет им заявки на заказ

    3.2. Водитель, который первым принимает заявку, должен исполнить заказ

    3.3. Если ни один водитель не может принять заказ, то пользователь уведомляется об этом

4. Если отложенный заказ

    4.1. Оператор выбирает несколько машин с высоким рейтингом
    
    4.2. Водитель с наибольшим приоритетом должен исполнить заказ. В случае наличия нескольких водителей с одинаковым приоритетом, исполнить заказ должен тот из них, кто быстрее примет заявку.
    
    4.3. Если ни один водитель не может принять заказ, то пользователь уведомляется об этом

### Order execution

1. Водитель приезжает на место, устанавливается таймер прихода пассажира

2. Спустя N минут, если поездка не начала осуществляться, начинается линейное
увеличение платы со временем; спустя M минут заказ отменяется и ставится наихудший рейтинг пользователя

3. Если пользователь явился, начинается поездка

4. Водитель сообщает о прибытии и количество проеханных километров

### Feedback

1. Водитель выставляет рейтинг пользователя

2. Пользователь выставляет рейтинг водителя

3. Вычисляется скидка для пользователя на последующие поездки

4. Вычисляется приоритет водителя при отложенном заказе
